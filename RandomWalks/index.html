<!DOCTYPE doctype html>

<html lang="en">
<head><title>Random Walks</title>
<meta charset="utf-8">

<meta content="" name="description"/>
<link href="../CLstyle.css" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
</link></link></meta></head>

<div id = "banner">
<a href="http://cnr.lwlss.net">
<div style="display:inline-block; align: center;vertical-align: middle;" >
  <img src="../logo.png" style="height:150px; padding-right: 20px;">
</div>
<div style="display:inline-block;vertical-align: middle;">
  <h1 style="margin-top:-10; margin-bottom:-10;">Conor Lawless</h1>
  <h2 style="margin-top:-10; margin-bottom:-10;">Scientific Computing</h2>
  <h3 style="margin-top:-10; margin-bottom:-10;">http://cnr.lwlss.net</h3>
</div>
</a>
</div>


<body><header><h1>Random Walks</h1><time datetime="2009-11-26T02:09:00Z">02:09 Thursday 26th November 2009</time></header><article>I went to a nice talk today by <a href="http://www.ebi.ac.uk/~lenov/">Nicolas Le Novere</a> about some current developments in <a href="http://sbml.org">SBML</a>, a standard language for describing biological models to computers.  
<br/>
<br/>During his talk he mentioned some of his work on modelling neurons and flashed up an image representing a molecule diffusing into a synapse.  I think it was undergoing <a href="http://en.wikipedia.org/wiki/Brownian_motion">Brownian motion</a>, which is basically a random walk in space (looked like 2-dimensional space to me).  
<br/>
<br/>In May I wrote some <a href="http://www.python.org/">Python</a> code using <a href="http://www.pygame.org/">PyGame</a> which simulates random walks, generating still images of them, but also displaying an animation of their generation (see below).  It generates anti-aliased lines, so it still looks smooth even when taking tiny step sizes.  Simply run it, and it will show you how it is choosing the random steps in the walk, and finally it will produce a .png image which looks like this:
<br/>
<br/><a href="http://www.flickr.com/photos/conchur/3528706125/" title="RandomWalk by Conor Lawless, on Flickr"><img alt="RandomWalk" height="500" src="http://farm4.static.flickr.com/3387/3528706125_f80a42d49b.jpg" width="267"/></a>
<br/>
<br/>You can change the resolution, step-sizes etc. yourself.  I am not sure if the steps should be normally distributed or uniformly distributed to be true Brownian motion, but I can't see any difference in the patterns generated by eye.  Anyway, it's a nice simple example of using <a href="http://www.pygame.org/">PyGame</a> for something non-game related.
<br/>
<br/><pre><font face="Lucida,Courier New"><font color="#C00000">import</font> <font color="#000000">pygame</font><font color="#0000C0">,</font> <font color="#000000">sys</font><font color="#0000C0">,</font> <font color="#000000">numpy</font>
<br/><font color="#C00000">from</font> <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">locals</font> <font color="#C00000">import</font> <font color="#0000C0">*</font>
<br/>
<br/><font color="#008000"># Define screen size
<br/></font><font color="#000000">size</font><font color="#0000C0">=</font><font color="#000000">width</font><font color="#0000C0">,</font><font color="#000000">height</font><font color="#0000C0">=</font><font color="#0080C0">1000</font><font color="#0000C0">,</font><font color="#0080C0">1000</font>
<br/><font color="#008000"># It's much faster if we don't show the walk developing...
<br/></font><font color="#000000">showwalk</font><font color="#0000C0">=</font><font color="#000000">True</font>
<br/>
<br/><font color="#008000"># Initialise screen, set size
<br/></font><font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">init</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<br/><font color="#000000">screen</font> <font color="#0000C0">=</font> <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">display</font><font color="#0000C0">.</font><font color="#000000">set_mode</font><font color="#0000C0">(</font><font color="#000000">size</font><font color="#0000C0">)</font>
<br/><font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">display</font><font color="#0000C0">.</font><font color="#000000">set_caption</font><font color="#0000C0">(</font><font color="#004080">'A Random Walk'</font><font color="#0000C0">)</font>
<br/>
<br/><font color="#008000"># Fill background with white
<br/></font><font color="#000000">background</font> <font color="#0000C0">=</font> <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">Surface</font><font color="#0000C0">(</font><font color="#000000">size</font><font color="#0000C0">)</font>
<br/><font color="#000000">background</font> <font color="#0000C0">=</font> <font color="#000000">background</font><font color="#0000C0">.</font><font color="#000000">convert</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<br/><font color="#000000">background</font><font color="#0000C0">.</font><font color="#000000">fill</font><font color="#0000C0">(</font><font color="#0000C0">(</font><font color="#0080C0">255</font><font color="#0000C0">,</font> <font color="#0080C0">255</font><font color="#0000C0">,</font> <font color="#0080C0">255</font><font color="#0000C0">)</font><font color="#0000C0">)</font>
<br/>
<br/><font color="#008000"># Start at centre of image
<br/></font><font color="#000000">x</font><font color="#0000C0">,</font><font color="#000000">y</font><font color="#0000C0">=</font><font color="#000000">width</font><font color="#0000C0">/</font><font color="#0080C0">2</font><font color="#0000C0">,</font><font color="#000000">height</font><font color="#0000C0">/</font><font color="#0080C0">2</font>
<br/>
<br/><font color="#C00000">def</font> <font color="#000000">Exit</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
<br/>        <font color="#008000"># Blit everything to the screen
<br/></font>        <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">blit</font><font color="#0000C0">(</font><font color="#000000">background</font><font color="#0000C0">,</font> <font color="#0000C0">(</font><font color="#0080C0">0</font><font color="#0000C0">,</font> <font color="#0080C0">0</font><font color="#0000C0">)</font><font color="#0000C0">)</font>
<br/>        <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">display</font><font color="#0000C0">.</font><font color="#000000">flip</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<br/>        <font color="#008000"># Save image
<br/></font>        <font color="#000000">fname</font><font color="#0000C0">=</font><font color="#004080">"RandWalk"</font><font color="#0000C0">+</font><font color="#000000">str</font><font color="#0000C0">(</font><font color="#000000">numpy</font><font color="#0000C0">.</font><font color="#000000">random</font><font color="#0000C0">.</font><font color="#000000">randint</font><font color="#0000C0">(</font><font color="#0080C0">0</font><font color="#0000C0">,</font><font color="#0080C0">99999</font><font color="#0000C0">)</font><font color="#0000C0">)</font><font color="#0000C0">+</font><font color="#004080">".png"</font>
<br/>        <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">image</font><font color="#0000C0">.</font><font color="#000000">save</font><font color="#0000C0">(</font><font color="#000000">background</font><font color="#0000C0">,</font><font color="#000000">fname</font><font color="#0000C0">)</font>
<br/>        <font color="#008000"># Quit gracefully
<br/></font>        <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">quit</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<br/>        <font color="#000000">sys</font><font color="#0000C0">.</font><font color="#000000">exit</font><font color="#0000C0">(</font><font color="#0080C0">0</font><font color="#0000C0">)</font>
<br/>
<br/><font color="#008000"># Start walking until we hit the edge
<br/></font><font color="#C00000">while</font> <font color="#0080C0">0</font><font color="#0000C0">&lt;=</font><font color="#000000">x</font><font color="#0000C0">&lt;</font><font color="#000000">width</font> <font color="#C00000">and</font> <font color="#0080C0">0</font><font color="#0000C0">&lt;=</font><font color="#000000">y</font><font color="#0000C0">&lt;</font><font color="#000000">height</font><font color="#0000C0">:</font>
<br/>        <font color="#008000"># Generate new steps
<br/></font>        <font color="#000000">xnew</font><font color="#0000C0">=</font><font color="#000000">x</font><font color="#0000C0">+</font><font color="#000000">numpy</font><font color="#0000C0">.</font><font color="#000000">random</font><font color="#0000C0">.</font><font color="#000000">uniform</font><font color="#0000C0">(</font><font color="#0000C0">-</font><font color="#0080C0">1.0</font><font color="#0000C0">,</font><font color="#0080C0">1.0</font><font color="#0000C0">)</font>
<br/>        <font color="#000000">ynew</font><font color="#0000C0">=</font><font color="#000000">y</font><font color="#0000C0">+</font><font color="#000000">numpy</font><font color="#0000C0">.</font><font color="#000000">random</font><font color="#0000C0">.</font><font color="#000000">uniform</font><font color="#0000C0">(</font><font color="#0000C0">-</font><font color="#0080C0">1.0</font><font color="#0000C0">,</font><font color="#0080C0">1.0</font><font color="#0000C0">)</font>
<br/>        <font color="#008000"># Let's try to draw an anti-aliased line
<br/></font>        <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">draw</font><font color="#0000C0">.</font><font color="#000000">aaline</font><font color="#0000C0">(</font><font color="#000000">background</font><font color="#0000C0">,</font> <font color="#0000C0">(</font><font color="#0080C0">0</font><font color="#0000C0">,</font><font color="#0080C0">0</font><font color="#0000C0">,</font><font color="#0080C0">0</font><font color="#0000C0">)</font><font color="#0000C0">,</font> <font color="#0000C0">(</font><font color="#000000">x</font><font color="#0000C0">,</font><font color="#000000">y</font><font color="#0000C0">)</font><font color="#0000C0">,</font> <font color="#0000C0">(</font><font color="#000000">xnew</font><font color="#0000C0">,</font><font color="#000000">ynew</font><font color="#0000C0">)</font><font color="#0000C0">,</font> <font color="#000000">True</font><font color="#0000C0">)</font>
<br/>        <font color="#000000">x</font><font color="#0000C0">,</font><font color="#000000">y</font><font color="#0000C0">=</font><font color="#000000">xnew</font><font color="#0000C0">,</font><font color="#000000">ynew</font>
<br/>        <font color="#008000"># Blit everything to the screen if we want to see development
<br/></font>        <font color="#C00000">if</font> <font color="#000000">showwalk</font><font color="#0000C0">:</font>
<br/>                <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">blit</font><font color="#0000C0">(</font><font color="#000000">background</font><font color="#0000C0">,</font> <font color="#0000C0">(</font><font color="#0080C0">0</font><font color="#0000C0">,</font> <font color="#0080C0">0</font><font color="#0000C0">)</font><font color="#0000C0">)</font>
<br/>                <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">display</font><font color="#0000C0">.</font><font color="#000000">flip</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<br/>        <font color="#008000"># Exit gracefully if required by pressing q
<br/></font>        <font color="#C00000">for</font> <font color="#000000">event</font> <font color="#C00000">in</font> <font color="#000000">pygame</font><font color="#0000C0">.</font><font color="#000000">event</font><font color="#0000C0">.</font><font color="#000000">get</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
<br/>                <font color="#C00000">if</font> <font color="#000000">event</font><font color="#0000C0">.</font><font color="#000000">type</font> <font color="#0000C0">==</font> <font color="#000000">KEYDOWN</font> <font color="#C00000">and</font> <font color="#000000">event</font><font color="#0000C0">.</font><font color="#000000">key</font><font color="#0000C0">==</font><font color="#000000">K_q</font><font color="#0000C0">:</font>
<br/>                        <font color="#000000">Exit</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
<br/><font color="#000000">Exit</font><font color="#0000C0">(</font><font color="#0000C0">)</font><font color="#000000"></font></font></pre></article></body>
</html>